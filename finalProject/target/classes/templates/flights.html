<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Available Flights</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 40px;
            background-color: #f9f9f9;
            color: #333;
        }
        .flight-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 10px; /* Add space between entries */
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            margin: 5px 0;
        }
        button {
            background-color: #28a745;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #218838;
        }
        .select-flight-button {
            background-color: #f8f8f8; /* Lighter grey for button */
            color: #333;
            padding: 10px 15px;
            border: 2px solid #ccc; /* Border to differentiate from regular buttons */
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s, border-color 0.3s;
        }
        .select-flight-button:hover {
            background-color: #e0e0e0; /* Slightly darker grey on hover */
            border-color: #bbb;
        }
        .select-flight-button.selected {
            background-color: #d0d0d0; /* Even darker grey to indicate active selection */
            border-color: #28a745; /* Green border to match the select color */
        }
        .selected-flight {
            background-color: #f0f0f0; /* Shade of grey to indicate selection */
        }
    </style>
</head>
<body>
    <h2>Available Flights</h2>
    <form action="#" th:action="@{/printTickets}" method="post">
        <div th:each="flight, iterStat : ${flights}" class="flight-container">
            <p>Flight #[[${iterStat.index + 1}]]:</p>
            <ul>
                <li>From: <span th:text="${flight[0]}"></span></li>
                <li>To: <span th:text="${flight[1]}"></span></li>
                <li>Departure Time: <span th:text="${flight[2]}"></span></li>
                <li>Arrival Time: <span th:text="${flight[3]}"></span></li>
                <li>Departure Date: <span th:text="${flight[4]}"></span></li>
                <li>Arrival Date: <span th:text="${flight[5]}"></span></li>
            </ul>
            <button type="button" class="select-flight-button" 
                th:data-flight-index="${iterStat.index}" 
                th:data-flight-value="${flight[0]} + ' ' + ${flight[1]} + ' ' + ${flight[2]} + ' ' + ${flight[3]} + ' ' + ${flight[4]} + ' ' + ${flight[5]}">Select This Flight</button>
            <input type="hidden" th:name="'selectedFlights[' + ${iterStat.index} + ']'" th:value="${null}"/>
            <hr />
        </div>
        <button type="submit">Print Selected Tickets</button>
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('.select-flight-button').forEach(button => {
                button.addEventListener('click', function() {
                    const flightContainer = this.closest('.flight-container');
                    const flightValue = this.getAttribute('data-flight-value');
                    const flightIndex = this.getAttribute('data-flight-index');
                    const isSelected = flightContainer.classList.toggle('selected-flight');
                    this.classList.toggle('selected');
                    // Update the value of the hidden input for the selected flight
                    const hiddenInput = document.querySelector('input[name="selectedFlights['+flightIndex+']"]');
                    if (isSelected) {
                        hiddenInput.value = flightValue;
                    } else {
                        hiddenInput.value = '';
                    }
                });
            });
        });
    </script>
</body>
</html>